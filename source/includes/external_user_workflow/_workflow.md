# Getting started

If you are interested in getting access to our solutions, you just need
to follow these steps:

1. [Ask for credentials](#ask-for-credentials)
2. [Check your e-mail inbox](#check-your-e-mail-inbox)
3. [Reset your password](#reset-your-password)
4. [Authenticate](#authenticate)

## Ask for credentials

Access <a href="https://agco-fuse.github.io/" target="_blank">AGCO's
Developer Website</a> and request Sandbox access.
Our team will get in contact with you as soon as posible.

## Check your e-mail inbox

Once our team handle your request, you will receive an e-mail containing
the following information:

Property                 | Description
--------                 | -----------
`username`               | The provided email.
`password`               | A random alphanumeric password generated by the system (this need to be changed).
`client_id`              | Application identifier to authenticate using [OAuth2](#authenticate-using-oauth2).
`client_secret`          | Application secret to authenticate using [OAuth2](#authenticate-using-oauth2).
`URL to change password` | New users are required to change their passwords, otherwise authentication will fail.

## Reset your password

<aside class="notice">
New users are required to change their password. If you don't, you will
not be able to authenticate in any of our systems.
</aside>

Access [OneAGCO](https://aaat.agcocorp.com) and authenticate
using your e-mail address and the auto-generated password.

Once authenticated, you will be asked to change your password.

![reset password](images/user_reset_password.png "Reset passowrd")

You also will be required to answer your security questions, as of the image below:

<aside class="notice">You must answer at least <code>3</code> questions.</aside>

![security questions](images/user_security_questions.png "Security questions")

## Authenticate

Our solutions support [OAuth2 authentication](#authenticate-using-oauth2) method.

## Authenticate using OAuth2

To authenticate using `OAuth2` just send a request containing the credentials
access token like the `authentication response` example in the right column.

For more details about OAuth2 access the [http://oauth.net/2/](http://oauth.net/2/)

> `curl` example of OAuth2 authentication:

```shell
curl -k -X "POST"\
    "https://aaat.agcocorp.com/auth/oauth2/access_token?realm=/dealers"\
    --data-urlencode "username=YOUR_USERNAME"\
    --data-urlencode "password=YOUR_PASSWORD"\
    --data-urlencode "scope=cn mail agcoUUID"\
    --data-urlencode "client_id=YOUR_CLIENT_ID"\
    --data-urlencode "client_secret=YOUR_CLIENT_SECRET"\
    --data-urlencode "grant_type=password"
```

> HTTP 200 authentication response example:

```json
{
  "scope":"mail cn agcoUUID",
  "expires_in":7199,
  "token_type":"Bearer",
  "refresh_token":"2483055a-cb08-4027-a8a9-03f89988d025",
  "access_token":"be9225f4-961a-49c5-bd0d-cf36cb855f69"
}
```

### Authentication response fields

Field           | Description
-----           | -----------
`scope`         | Requested scope
`expires_in`    | Token expiration time
`token_type`    | Access token type
`refresh_token` | Refresh token
`access_token`  | Access token

## How permissions are handled

> Example of how to get models from Telemetry API using OAuth2 authentication:

```shell
curl -X GET \
    -H "Authorization: Bearer YOUR_ACCESS_TOKEN"\
    "https://agco-fuse-trackers-sandbox.herokuapp.com/models"
```

The `token Bearer` corresponds to the user credentials and the APIs
will check which data can be retrieved.

To make sure everything is working fine you can try executing one
of the following examples available on the right side.

<aside class="notice">
All requests should contain an Authorization header.
</aside>
